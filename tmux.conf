# Use ctrl-a instead of ctrl-b
set -g prefix C-a
unbind C-b
bind C-a send-prefix
bind a send-prefix

# Default termtype. If the rcfile sets $TERM, that overrides this value.
set -g default-terminal screen-256color

# Ring the bell if any background window rang a bell
set -g bell-action any

# visual notification of activity in other windows
setw -g monitor-activity on
set -g visual-activity on

# scroll back
set -g history-limit 20000

set -g base-index 1
setw -g pane-base-index 1

set -g xterm-keys on


###########
# Key maps

bind-key C-d detach-client
bind-key C-p paste-buffer

# Redraw client
bind R refresh-client

# reload config
unbind r
bind r \
  source-file ~/.tmux.conf \;\
  display 'Reloaded tux config.'

# use VI
set -g status-keys vi
setw -g mode-keys vi


# Split small bottom window
unbind ^T
bind ^T split-window -p 25 -c "#{pane_current_path}"

# horizontal and vertical splits
unbind |
bind | split-window -h -c "#{pane_current_path}"
unbind _
bind _ split-window -c "#{pane_current_path}"

# tile all windows
unbind =
bind = select-layout tiled

# cycle through panes
unbind ^A
bind ^A select-pane -t :.+

unbind Right
bind Right resize-pane -R 8
unbind Left
bind Left resize-pane -L 8
unbind Up
bind Up resize-pane -U 4
unbind Down
bind Down resize-pane -D 4

unbind h
unbind j
unbind k
unbind l

bind h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"# pane movement
bind l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"

bind-key m command-prompt -p "join pane from:"  "join-pane -s '%%'"
bind-key z command-prompt -p "send pane to:"  "join-pane -t '%%'"

set-window-option -g automatic-rename off

set -g default-terminal "screen-256color-bce"
#source ~/.solarized/tmux-colors-solarized/tmuxcolors.conf
set -sg escape-time 0

# Setup 'v' to begin selection as in Vim
# bind-key -T copy-mode-vi 'y' send-keys -X copy-selection
bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel 'reattach-to-user-namespace pbcopy'

# Update default binding of `Enter` to also use copy-pipe
# bind-key -T copy-mode-vi Enter send-keys -X copy-selection
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel 'reattach-to-user-namespace pbcopy'

# smart pane switching with awareness of vim splits
bind -n M-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n M-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n M-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n M-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

# default statusbar colors
set-option -g status-bg colour235
set-option -g status-fg colour255
# set-option -g status-attr default

# # default window title colors

# active window title colors
setw -g mode-style bg=colour6,fg=colour0
setw -g mode-style bg=colour235,fg=colour196,bold
setw -g window-status-current-style bg=colour2,fg=colour0,dim
setw -g window-status-style bg=colour235,fg=colour255
setw -g window-status-activity-style bg=colour3,fg=black
setw -g status-style bg=colour234,fg=colour137

# # pane border
# set-option -g pane-border-fg colour254
# set-option -g pane-active-border-fg colour245
# set-option -g pane-border-bg colour254
# set-option -g pane-active-border-bg colour245

# # message text
# set-option -g message-bg colour254
# set-option -g message-fg colour166

# # pane number display
# set-option -g display-panes-active-colour colour33
# set-option -g display-panes-colour colour166

# # clock
# set-window-option -g clock-mode-colour colour33

set -g status-left-length 70
set -g status-left "#[fg=green]: #h : #[fg=brightblue] #[fg=yellow]#(ifconfig en0 | grep 'inet ' | awk '{print \"en0 \" $2}') #(ifconfig en1 | grep 'inet ' | awk '{print \"en1 \" $2}') #[fg=red]#(ifconfig tun0 | grep 'inet ' | awk '{print \"vpn \" $2}') "

# show session name, window & pane number, date and time on right side of
# status bar
set -g status-right-length 60
set -g status-right "#[fg=blue]#S #I:#P #[fg=yellow]:: %d %b %Y #[fg=green]:: %l:%M %p :: #(date -u | awk '{print $4}')::"
set -g status-justify centre
set-option -g default-command "reattach-to-user-namespace -l $SHELL"
# set status bar

